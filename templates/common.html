{% extends "base.html" %}

{% block content %}
<h2>Записи в блоге</h2>
<div id="news">
{% if current_user.is_authenticated %}
    <a href="news" class="btn btn-secondary">Добавить новость</a><br/><br/>
{% endif %}
    {% for new in news %}
        <div class="post">
            <h3 class="news_title">{{ new.title }}</h3>{% if new.is_private %}&emsp;<p class="private_flag">Видите только вы</p>{% endif %}
            <p>{{ new.content }}<br/>
            Автор: {{ new.user.name }}, Дата написания: {{ new.created_date }}</p>
            {% if current_user.is_authenticated and current_user == new.user %}
                <div class="btns">
                    <a href="/news/{{ new.id }}" class="btn btn-warning">
                        Изменить
                    </a>
                    <a href="/news_delete/{{ new.id }}" class="btn btn-danger">
                        Удалить
                    </a>
                </div>
            {% endif %}
        </div>
    <br/>
    {% endfor %}
</div>
<br/>
<h3>Works log</h3>
<div id="work_logs">
{% for job in jobs %}
{% set clr = "#c2ffde" if job[4] else "#fff6c1" %}
<h5>Action #{{ loop.index }}</h5>
{% if current_user.id == job[5] or current_user.id == 1 %}
    <div class="btns2">
        <a href="/addjob/{{ job[6] }}" class="btn btn-warning">
            Изменить
        </a>
        <a href="/job_delete/{{ job[6] }}" class="btn btn-danger">
            Удалить
        </a>
    </div>
    <br/>
{% endif %}
<table class="table">
  <thead class="thead-light">
    <tr class="d-flex" style="background-color: #e1e1e1">
      <th scope="col" class="col-4">Title of activity</th>
      <th scope="col" class="col-2">Team leader</th>
      <th scope="col" class="col-2">Duration</th>
      <th scope="col" class="col-2">List of collaborators</th>
      <th scope="col" class="col-2">Is finished</th>
    </tr>
  </thead>
  <tbody>
    <tr class="d-flex" style="background-color: #aeeaff">
      <td class="col-4">{{ job[0] }}</td>
      <td class="col-2">{{ job[1] }}</td>
      <td class="col-2">{{ job[2] }}</td>
      <td class="col-2">{{ job[3] }}</td>
      <td class="col-2" style="background-color: {{ clr }}">{{ "Is finished" if job[4] else "Is not finished" }}</td>
    </tr>
  </tbody>
</table>
{% endfor %}
</div>
{% endblock %}
